input and output are actually the same file (hardlinked)
